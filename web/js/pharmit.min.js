!function(e){e.support.cssPseudoClasses=function(){try{var n=e("<input type='checkbox' checked/>").appendTo("body"),t=e('<style type="text/css" />').appendTo("head");t.text("input:checked {width: 200px; display: none}");var a="200px"==n.css("width");return n.remove(),t.remove(),a}catch(i){return!1}}(),e.fn.fileinput=function(n){var t=this;return n||(n='<button class="fileinput">Browse...</button>'),t.each(function(){var t=e(this);t.wrap('<div class="fileinput-wrapper" style=" position: relative; display: inline-block;" />'),t.parent().mousemove(function(n){var t,a,i=e(this);t=i.offset().left,a=i.offset().top,i.find("input").css({left:n.pageX-t-i.find("input[type=file]").width()+30,top:n.pageY-a-10})}),t.attr("tabindex","-1").css({filter:"alpha(opacity=0)","-moz-opacity":0,opacity:0,position:"absolute","z-index":-1}),t.before(n),t.prev().addClass("fileinput"),e.support.cssPseudoClasses?(t.prev(".fileinput").click(function(){t.click()}),t.prev(":submit.fileinput").click(function(e){e.preventDefault()})):(t.css({"z-index":"auto",cursor:"pointer"}),t.prev(".fileinput").css("z-index",-1),t.removeAttr("tabindex"),t.prev(".fileinput").attr("tabindex","-1"),t.hover(function(){e(this).prev(".fileinput").addClass("hover")},function(){e(this).prev(".fileinput").removeClass("hover")}).focusin(function(){e(this).prev(".fileinput").addClass("focus")}).focusout(function(){e(this).prev(".fileinput").removeClass("focus")}).mousedown(function(){e(this).prev(".fileinput").addClass("active")}).mouseup(function(){e(this).prev(".fileinput").removeClass("active")}))}),t}}(jQuery);var Pharmit={};$(document).ready(function(){{var e=$("#pharmit"),n=new Pharmit.Viewer(e);new Pharmit.PharmaResults(e,n),new Pharmit.Query(e,n)}$("button, input[type='button'], input[type='submit']").button().bind("mouseup",function(){$(this).blur()})});var Pharmit=Pharmit||{};Pharmit.PharmaResults=function(){function e(){}return e}();var Pharmit=Pharmit||{};Pharmit.Query=function(){function e(e,n){this.container=$("<div>").appendTo(e).addClass("featurediv");var t=$("<h3>"+n.name+"<br></h3>").appendTo(this.container);this.summary=$("<span>").appendTo(t).addClasS("featuresummary");var a=($("<div>").appendTo(this.container),$("<div>").appendTo(this.editdiv).addClass("locationdiv"));$("<label>x:</label>").appendTo(a),this.x=$("<input>").appendTo(locationDiv).addClass("coordinput"),this.x.spinner({step:.1,numberFormat:"n"}),$("<label>y:</label>").appendTo(a),this.y=$("<input>").appendTo(locationDiv).addClass("coordinput"),this.y.spinner({step:.1,numberFormat:"n"}),$("<label>z:</label>").appendTo(a),this.z=$("<input>").appendTo(locationDiv).addClass("coordinput"),this.z.spinner({step:.1,numberFormat:"n"}),$("<label>Radius:</label>").appendTo(a),this.radius=$("<input>").appendTo(locationDiv).addClass("radiusinput"),this.radius.spinner({step:.1,numberFormat:"n"});var i=this.orientdiv=$("<div>").appendTo(this.editdiv).addClass("orientdiv");$('<input type="checkbox"').appendTo(i),$("<label>&theta;:</label>").appendTo(i),this.theta=$("<input>").appendTo(i).addClass("orientinput"),this.theta.spinner({step:1,numberFormat:"n"}),$("<label>&phi;:</label>").appendTo(i),this.phi=$("<input>").appendTo(i).addClass("orientinput"),this.phi.spinner({step:1,numberFormat:"n"}),this.orientdiv.hide(),this.setFeature(n)}function n(e,n){var t=$("<div>").addClass("pharmit_query"),a=null,i=function(){},o=function(){},r=function(){if(this.files.length>0){var e=this.files[0],t=new FileReader;t.onload=function(t){n.setReceptor(t.target.result,e.name)},t.readAsText(e)}},p=function(){},s=function(){},d=function(){},l=function(){},u=function(e,n){var t=$("<div>").addClass("searchdiv"),a=$("<button>Search "+n[0]+"</button>").appendTo(t).button(),o=$("<button>Select subset to search</button>").appendTo(t).button({text:!1,icons:{primary:"ui-icon-triangle-1-s"}});t.buttonset();for(var r=$("<ul>").appendTo(t),p=[],s=0,d=n.length;d>s;s++)p[s]="<li>"+n[s]+"</li>";r.append(p),r.hide().menu().on("menuselect",function(e,n){a.button("option","label","Search "+n.item.text())}),a.click(i),o.click(function(){var e=r.show().position({my:"left top",at:"left buttom",of:this});return $(document).one("click",function(){e.hide()}),!1}),e.prepend(t)};this.pickCallback=function(){},t.resizable({handles:"e"});var c=$("<div>").appendTo(t).addClass("queryheader");u(c,["MolPort","ZINC"]);var h=$("<div>").appendTo(c),m=$("<button>Load Features...</button>").button(),f=$("<button>Load Receptor...</button>").button();e.append(t);$('<input type="file">').appendTo(h).fileinput(m).change(o),$('<input type="file">').appendTo(h).fileinput(f).change(r);t.detach();var v=$("<div>").appendTo(t).addClass("querybody"),b=$("<div>").appendTo(v);$("<div>Pharmacophore</div>").appendTo(b).addClass("queryheading"),a=$("<div>").appendTo(b),a.accordion({header:"> div > h3",animate:!0,collapsible:!0,heightStyle:"content"}).sortable({axis:"y",handle:"h3",stop:function(e,n){n.item.children("h3").triggerHandler("focusout"),$(this).accordion("refresh")}});var T=($("<button>Add</button>").appendTo(b).button({text:!0,icons:{secondary:"ui-icon-circle-plus"}}).click(p),$("<button>Sort</button>").appendTo(b).button({text:!0,icons:{secondary:"ui-icon ui-icon-carat-2-n-s"}}).click(s),$("<div>").appendTo(v));$("<div>Filters</div>").appendTo(T).addClass("queryheading");var y=$("<div>").appendTo(T),C=$("<h3>Hit Reduction<br></h3>").appendTo(y),x=($('<span class="headingsummary"></span>').appendTo(C),$('<div class="hitreduction"></div>').appendTo(y)),g=$("<div>").addClass("filterrow").appendTo(x);g.append('<label title="Maximum number of orientations returned for each conformation" value="1" for="reduceorienttext">Max Hits per Conf:</label>');$('<input id="reduceorienttext" name="max-orient">').appendTo(g).spinner();g=$("<div>").addClass("filterrow").appendTo(x),g.append('<label title="Maximum number of conformations returned for each compound" value="1" for="reduceconfstext">Max Hits per Mol:</label>');$('<input id="reduceconfstext" name="reduceConfs">').appendTo(g).spinner();g=$("<div>").addClass("filterrow").appendTo(x),g.append('<label title="Maximum number of hits returned" value="1" for="reducehitstext">Max Total Hits:</label>');$('<input id="reducehitstext" name="max-hits">').appendTo(g).spinner();C=$("<h3>Hit Screening<br></h3>").appendTo(y);var w=($('<span class="headingsummary"></span>').appendTo(C),$('<div class="hitscreening"></div>').appendTo(y));g=$("<div>").addClass("filterrow").appendTo(w);$('<input id="minmolweight" name="minMolWeight">').appendTo(g).spinner();g.append($('<label title="Minimum/maximum molecular weight (weights are approximate)" value="1" for="maxmolweight">&le;  Molecular Weight &le;</label>'));$('<input id="maxmolweight" name=maxMolWeight>').appendTo(g).spinner();g=$("<div>").addClass("filterrow").appendTo(w);$('<input id="minnrot" name="minrotbonds">').appendTo(g).spinner();g.append($('<label title="Minimum/maximum number of rotatable bonds" value="1" for="maxnrot"> &le;  Rotatable Bonds &le;</label>'));$('<input id="maxnrot" name="maxrotbonds">').appendTo(g).spinner();y.accordion({animate:!0,collapsible:!0,heightStyle:"content"});var P=$("<div>").appendTo(v);$("<div>Visualization</div>").appendTo(P).addClass("queryheading"),n.appendViewerControls(P);var M=$("<div>").appendTo(t).addClass("queryfooter");e.append(t);{var k=$("<button>Load Session...</button>").button();$('<input type="file">').appendTo(M).fileinput(k).change(d),$("<button>Save Session...</button>").appendTo(M).button().click(l)}}return e.prototype.getFeature=function(){return this.obj},e.prototype.setFeature=function(){},e.prototype.disable=function(){},e.prototype.enable=function(){},e.prototype.select=function(){},e.prototype.deselect=function(){},e.prototype.remove=function(){},n}();var Pharmit=Pharmit||{};Pharmit.Viewer=function(){function e(e){var n=$3Dmol.elementColors,t=[{name:"None",color:null},{name:"RasMol",color:n.rasmol},{name:"White",color:n.whiteCarbon},{name:"Green",color:n.greenCarbon},{name:"Cyan",color:n.cyanCarbon},{name:"Magenta",color:n.magentaCarbon},{name:"Yellow",color:n.yellowCarbon},{name:"Orange",color:n.orangeCarbon},{name:"Purple",color:n.purpleCarbon},{name:"Blue",color:n.blueCarbon}],a=null,i=null,o=function(e){if(!e)return"";var n=e.split(".");return n.length<=1?"":n.pop()},r=function(e,n){var a=$("<div>"),i=e+"MolStyleSelect";$('<label for="'+i+'">'+e+" Style</label>").appendTo(a).addClass("stylelabel");for(var o=$('<select name="'+i+'" id="'+i+'">').appendTo(a).addClass("styleselector"),r=0,p=t.length;p>r;r++)$('<option value="'+r+'">'+t[r].name+"</option>").appendTo(o);return o.val(n),o.selectmenu({width:120}),a};this.appendViewerControls=function(e){r("Ligand",1,null).appendTo(e),r("Results",1,null).appendTo(e),r("Receptor",2,null).appendTo(e),$('<label for="surfacetransparency">Receptor Surface Opacity</label>').appendTo(e);var n=$("<div>").addClass("surfacetransparencydiv").appendTo(e);$('<div id="surfacetransparency">').appendTo(n).slider({animate:"fast",step:.05,min:0,max:1,value:.8})},this.setReceptor=function(e,n){if(e){var t=o(n);i=a.addModel(e,t)}else i&&a.removeModel(i),i=null;a.zoomTo(),a.render()},a=new $3Dmol.GLViewer(e),a.setBackgroundColor("white")}return e}();