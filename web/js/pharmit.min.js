!function(e){e.support.cssPseudoClasses=function(){try{var t=e("<input type='checkbox' checked/>").appendTo("body"),n=e('<style type="text/css" />').appendTo("head");n.text("input:checked {width: 200px; display: none}");var a="200px"==t.css("width");return t.remove(),n.remove(),a}catch(i){return!1}}(),e.fn.fileinput=function(t){var n=this;return t||(t='<button class="fileinput">Browse...</button>'),n.each(function(){var n=e(this);n.wrap('<div class="fileinput-wrapper" style=" position: relative; display: inline-block;" />'),n.parent().mousemove(function(t){var n,a,i=e(this);n=i.offset().left,a=i.offset().top,i.find("input").css({left:t.pageX-n-i.find("input[type=file]").width()+30,top:t.pageY-a-10})}),n.attr("tabindex","-1").css({filter:"alpha(opacity=0)","-moz-opacity":0,opacity:0,position:"absolute","z-index":-1}),n.before(t),n.prev().addClass("fileinput"),e.support.cssPseudoClasses?(n.prev(".fileinput").click(function(){n.click()}),n.prev(":submit.fileinput").click(function(e){e.preventDefault()})):(n.css({"z-index":"auto",cursor:"pointer"}),n.prev(".fileinput").css("z-index",-1),n.removeAttr("tabindex"),n.prev(".fileinput").attr("tabindex","-1"),n.hover(function(){e(this).prev(".fileinput").addClass("hover")},function(){e(this).prev(".fileinput").removeClass("hover")}).focusin(function(){e(this).prev(".fileinput").addClass("focus")}).focusout(function(){e(this).prev(".fileinput").removeClass("focus")}).mousedown(function(){e(this).prev(".fileinput").addClass("active")}).mouseup(function(){e(this).prev(".fileinput").removeClass("active")}))}),n}}(jQuery);var Pharmit={};$(document).ready(function(){{var e=$("#pharmit"),t=new Pharmit.Viewer(e);new Pharmit.PharmaResults(e,t),new Pharmit.Query(e,t)}$("button, input[type='button'], input[type='submit']").button().bind("mouseup",function(){$(this).blur()})});var Pharmit=Pharmit||{};Pharmit.PharmaResults=function(){function e(){}return e}();var Pharmit=Pharmit||{};Pharmit.Query=function(){function e(e,t,n){var i=this;this.obj={},this.updateViewer=function(){},this.container=$("<div>").appendTo(t).addClass("featurediv"),this.container.feature=this;var o=$("<h3></h3>").appendTo(this.container);this.enabled=$('<input type="checkbox">').appendTo(o).click(function(e){i.obj.enabled=$(this).prop("checked")?!0:!1,i.updateViewer(),e.stopPropagation()});{var r=$("<span>").addClass("featurenameheading").appendTo(o);$("<span>").addClass("ui-icon-circle-close ui-icon").appendTo(o).click(function(){i.container.feature=null,i.container.remove()})}o.append($("<br>"));var s=$("<span>").appendTo(o).addClass("featuresummary");s.append($(document.createTextNode("("))),this.xsummary=$("<span>").appendTo(s),s.append($(document.createTextNode(","))),this.ysummary=$("<span>").appendTo(s),s.append($(document.createTextNode(","))),this.zsummary=$("<span>").appendTo(s),s.append($(document.createTextNode(") Radius "))),this.rsummary=$("<span>").appendTo(s);var p=$("<div>").appendTo(this.container),d=this.select=$('<select name="featurename">').addClass("featureselect").appendTo(p);$.each(a,function(e,t){$('<option value="'+t+'">'+t+"</option>").appendTo(d)}),d.change(function(){var e=this.value;i.obj.name=e,r.text(e),"Aromatic"==e||"HydrogenDonor"==e||"HydrogenAcceptor"==e?(i.orientdiv.show(),i.sizediv.hide(),i.obj.hasvec=!0):"Hydrophobic"==e?(i.orientdiv.hide(),i.sizediv.show(),i.obj.hasvec=!1):(i.orientdiv.hide(),i.sizediv.hide(),i.obj.hasvec=!1),i.updateViewer()}),d.selectmenu({change:function(){d.trigger("change")}});var l=$("<div>").appendTo(p).addClass("locationdiv"),u=function(e,t){var n=function(){e.change()};return t.spin=t.stop=t.change=n,t};$("<label>x:</label>").appendTo(l),this.x=$("<input>").appendTo(l).addClass("coordinput").change(function(){i.xsummary.text(this.value),i.obj.x=this.value,i.updateViewer()}),this.x.spinner(u(i.x,{step:.1,numberFormat:"n"})),$("<label>y:</label>").appendTo(l),this.y=$("<input>").appendTo(l).addClass("coordinput"),this.y.spinner(u(i.y,{step:.1,numberFormat:"n"})).change(function(){i.ysummary.text(this.value),i.obj.y=this.value,i.updateViewer()}),$("<label>z:</label>").appendTo(l),this.z=$("<input>").appendTo(l).addClass("coordinput"),this.z.spinner(u(i.z,{step:.1,numberFormat:"n"})).change(function(){i.zsummary.text(this.value),i.obj.z=this.value,i.updateViewer()}),$("<label>Radius:</label>").appendTo(l),this.radius=$("<input>").appendTo(l).addClass("radiusinput"),this.radius.spinner(u(i.radius,{step:.1,numberFormat:"n"})).change(function(){i.rsummary.text(this.value),i.obj.r=this.value,i.updateViewer()});var c=this.orientdiv=$("<div>").appendTo(p).addClass("orientdiv"),h=null,m=null,v=function(e,t){var n=e*Math.PI/180,a=t*Math.PI/180;i.obj.svector={x:Math.sin(n)*Math.cos(a),y:Math.sin(n)*Math.sin(a),z:Math.cos(n)}};this.orientenabled=$('<input type="checkbox">').appendTo(c).change(function(){$(this).prop("checked")?(h.spinner("option","disabled",!1),m.spinner("option","disabled",!1),i.obj.vector_on=0):(h.spinner("option","disabled",!0),m.spinner("option","disabled",!0),i.obj.vector_on=1,v(h.val(),m.val())),i.updateViewer()}),$("<label>&theta;:</label>").appendTo(c),h=this.theta=$("<input>").appendTo(c).addClass("orientinput"),this.theta.spinner(u(i.theta,{step:1,numberFormat:"n"})).change(function(){v(h.val(),m.val()),i.updateViewer()}),$("<label>&phi;:</label>").appendTo(c),m=this.phi=$("<input>").appendTo(c).addClass("orientinput"),this.phi.spinner(u(i.theta,{step:1,numberFormat:"n"})).change(function(){v(h.val(),m.val()),i.updateViewer()}),this.orientdiv.hide();var f=this.sizediv=$("<div>").appendTo(p).addClass("sizediv");this.minsize=$("<input>").appendTo(f).addClass("sizeinput"),this.minsize.spinner(u(i.minsize,{step:1,numberFormat:"n"})).change(function(){i.obj.minsize=this.value,i.updateViewer()}),$("<label> &le; #Atoms &le;</label>").appendTo(f),this.maxsize=$("<input>").appendTo(f).addClass("sizeinput"),this.maxsize.spinner(u(i.maxsize,{step:1,numberFormat:"n"})).change(function(){i.obj.maxsize=this.value,i.updateViewer()}),this.sizediv.hide(),this.setFeature(n),delete this.updateViewer,this.viewer=e,this.updateViewer(),t.accordion("refresh")}function t(t,a){var i=$("<div>").addClass("pharmit_query"),o=null,r=function(){},s=function(){},p=function(){if(this.files.length>0){var e=this.files[0],t=new FileReader;t.onload=function(t){a.setReceptor(t.target.result,e.name)},t.readAsText(e)}},d=function(){},l=function(){},u=function(){},c=function(e,t){var n=$("<div>").addClass("searchdiv"),a=$("<button>Search "+t[0]+"</button>").appendTo(n).button(),i=$("<button>Select subset to search</button>").appendTo(n).button({text:!1,icons:{primary:"ui-icon-triangle-1-s"}});n.buttonset();for(var o=$("<ul>").appendTo(n),s=[],p=0,d=t.length;d>p;p++)s[p]="<li>"+t[p]+"</li>";o.append(s),o.hide().menu().on("menuselect",function(e,t){a.button("option","label","Search "+t.item.text())}),a.click(r),i.click(function(){var e=o.show().position({my:"left top",at:"left buttom",of:this});return $(document).one("click",function(){e.hide()}),!1}),e.prepend(n)};i.resizable({handles:"e"});var h=$("<div>").appendTo(i).addClass("queryheader");c(h,["MolPort","ZINC"]);var m=$("<div>").appendTo(h),v=$("<button>Load Features...</button>").button(),f=$("<button>Load Receptor...</button>").button();t.append(i);$('<input type="file">').appendTo(m).fileinput(v).change(s),$('<input type="file">').appendTo(m).fileinput(f).change(p);i.detach();var b=$("<div>").appendTo(i).addClass("querybody"),g=$("<div>").appendTo(b);$("<div>Pharmacophore</div>").appendTo(g).addClass("queryheading"),o=$("<div>").appendTo(g),o.accordion({header:"> div > h3",animate:!0,collapsible:!0,heightStyle:"content"}).sortable({axis:"y",handle:"h3",stop:function(e,t){t.item.children("h3").triggerHandler("focusout"),$(this).accordion("refresh")}});var T=($("<button>Add</button>").appendTo(g).button({text:!0,icons:{secondary:"ui-icon-circle-plus"}}).click(function(){new e(a,o,n)}),$("<button>Sort</button>").appendTo(g).button({text:!0,icons:{secondary:"ui-icon ui-icon-carat-2-n-s"}}).click(d),$("<div>").appendTo(b));$("<div>Filters</div>").appendTo(T).addClass("queryheading");var y=$("<div>").appendTo(T),x=$("<h3>Hit Reduction<br></h3>").appendTo(y),C=($('<span class="headingsummary"></span>').appendTo(x),$('<div class="hitreduction"></div>').appendTo(y)),w=$("<div>").addClass("filterrow").appendTo(C);w.append('<label title="Maximum number of orientations returned for each conformation" value="1" for="reduceorienttext">Max Hits per Conf:</label>');$('<input id="reduceorienttext" name="max-orient">').appendTo(w).spinner();w=$("<div>").addClass("filterrow").appendTo(C),w.append('<label title="Maximum number of conformations returned for each compound" value="1" for="reduceconfstext">Max Hits per Mol:</label>');$('<input id="reduceconfstext" name="reduceConfs">').appendTo(w).spinner();w=$("<div>").addClass("filterrow").appendTo(C),w.append('<label title="Maximum number of hits returned" value="1" for="reducehitstext">Max Total Hits:</label>');$('<input id="reducehitstext" name="max-hits">').appendTo(w).spinner();x=$("<h3>Hit Screening<br></h3>").appendTo(y);var z=($('<span class="headingsummary"></span>').appendTo(x),$('<div class="hitscreening"></div>').appendTo(y));w=$("<div>").addClass("filterrow").appendTo(z);$('<input id="minmolweight" name="minMolWeight">').appendTo(w).spinner();w.append($('<label title="Minimum/maximum molecular weight (weights are approximate)" value="1" for="maxmolweight">&le;  Molecular Weight &le;</label>'));$('<input id="maxmolweight" name=maxMolWeight>').appendTo(w).spinner();w=$("<div>").addClass("filterrow").appendTo(z);$('<input id="minnrot" name="minrotbonds">').appendTo(w).spinner();w.append($('<label title="Minimum/maximum number of rotatable bonds" value="1" for="maxnrot"> &le;  Rotatable Bonds &le;</label>'));$('<input id="maxnrot" name="maxrotbonds">').appendTo(w).spinner();y.accordion({animate:!0,collapsible:!0,heightStyle:"content"});var M=$("<div>").appendTo(b);$("<div>Visualization</div>").appendTo(M).addClass("queryheading"),a.appendViewerControls(M);var P=$("<div>").appendTo(i).addClass("queryfooter");t.append(i);{var k=$("<button>Load Session...</button>").button();$('<input type="file">').appendTo(P).fileinput(k).change(l),$("<button>Save Session...</button>").appendTo(P).button().click(u)}}var n={name:"Hydrophobic",x:0,y:0,z:0,radius:1,enabled:!0,vector_on:0,minsize:"",maxsize:"",svector:null,hasvec:!1},a=["Aromatic","HydrogenDonor","HydrogenAcceptor","Hydrophobic","NegativeIon","PositiveIon"];return e.prototype.setFeature=function(e){if(this.select.val(e.name).trigger("change"),this.select.selectmenu("refresh"),this.x.val(e.x).trigger("change"),this.y.val(e.y).trigger("change"),this.z.val(e.z).trigger("change"),this.radius.val(e.radius).trigger("change"),this.enabled.val(e.enabled).trigger("change"),this.orientenabled.prop("checked",1==e.vector_on).trigger("change"),$.isNumeric(e.minsize)?this.minsize.val(e.minsize).trigger("change"):this.obj.minsize="",$.isNumeric(e.maxsize)?this.maxsize.val(e.maxsize).trigger("change"):this.obj.maxsize="",e.svector){var t=e.svector.x,n=e.svector.y,a=e.svector.z,i=180*Math.acos(a/Math.sqrt(t*t+n*n+a*a))/Math.PI,o=180*Math.atan2(n,t)/Math.PI;this.theta.val(i).trigger("change"),this.phi.val(o).trigger("change")}else this.obj.svector={x:1,y:0,z:0}},e.prototype.updateViewer=function(){},e.prototype.disable=function(){},e.prototype.enable=function(){},e.prototype.select=function(){},e.prototype.deselect=function(){},e.prototype.remove=function(){},t}();var Pharmit=Pharmit||{};Pharmit.Viewer=function(){function e(e){var t=$3Dmol.elementColors,n=[{name:"None",color:null},{name:"RasMol",color:t.rasmol},{name:"White",color:t.whiteCarbon},{name:"Green",color:t.greenCarbon},{name:"Cyan",color:t.cyanCarbon},{name:"Magenta",color:t.magentaCarbon},{name:"Yellow",color:t.yellowCarbon},{name:"Orange",color:t.orangeCarbon},{name:"Purple",color:t.purpleCarbon},{name:"Blue",color:t.blueCarbon}],a=null,i=null,o=function(e){if(!e)return"";var t=e.split(".");return t.length<=1?"":t.pop()},r=function(e,t){var a=$("<div>"),i=e+"MolStyleSelect";$('<label for="'+i+'">'+e+" Style</label>").appendTo(a).addClass("stylelabel");for(var o=$('<select name="'+i+'" id="'+i+'">').appendTo(a).addClass("styleselector"),r=0,s=n.length;s>r;r++)$('<option value="'+r+'">'+n[r].name+"</option>").appendTo(o);return o.val(t),o.selectmenu({width:120}),a};this.appendViewerControls=function(e){r("Ligand",1,null).appendTo(e),r("Results",1,null).appendTo(e),r("Receptor",2,null).appendTo(e),$('<label for="surfacetransparency">Receptor Surface Opacity</label>').appendTo(e);var t=$("<div>").addClass("surfacetransparencydiv").appendTo(e);$('<div id="surfacetransparency">').appendTo(t).slider({animate:"fast",step:.05,min:0,max:1,value:.8})},this.setReceptor=function(e,t){if(e){var n=o(t);i=a.addModel(e,n)}else i&&a.removeModel(i),i=null;a.zoomTo(),a.render()},a=new $3Dmol.GLViewer(e),a.setBackgroundColor("white")}return e}();